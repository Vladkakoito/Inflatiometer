Описание сервисов

Используемые сервисы запускают другие сервисы. И запускаются ТОЛЬКО другими сервисами (кроме контроллера).
Для родительского сервиса необхдимо указать в конфигурационном файле ([имя сервиса].ini) дочерние сервисы, которые он может вызвать.
Буду стараться делать взаимодействие между сервисами максимально универсальным.
Что бы их можно было их менять если потребуется.

1. Контроллер - стартует первым, дёргает за нитки, всеми управляет.
  По команде / расписанию запускает парсеры и обработчики данных, "дружит" парсеры и обработчики через PIPE.
  На данный момент 1 парсер и 1 обработчик. Но думаю стоит сделать очередь между ними в рамках контроллера,
  что бы была возможность подключить несколько парсеров и несколько обработчиков.
  Запускает сервер для приёма пользовательских команд.

2. Парсеры - пока магнитовский на питоне. Собирает данные и отдаёт их в на данный момент в PIPE(для него это stdout),
  Из данных пока только название и цена. Наверное, стоит ещё в перспективе код магазина добавить.

3. Обработчик данных - берёт данные от парсера, приводит их к стандартному (моему) виду. 
  Дёргает менеджера БД для записи в БД. Тут сложность провести соответствие названий в моей БД и прилетевшие.

4. Менеджер БД - взаимодействует с БД. БД в моём случае это просто структура файловой системы.

5. Сервер - пока даже не начал. Будет слушать запросы пользователей на получение данных,
  команды - например на запуск парсинга. Может ещё чего

Для того что бы можно было в общем конфиге настраивать любой сервис, настройки (Settings.h) 
включают в себя структуры для всех сервисов. И парсер в Common умеет их всех парсить.
Возможно, позже придёт более хорошая идея.


Структура БД. Пока сыро всё.
Каталог Database в корне с бинарниками. Содержит
1. Каталог Src - непосредственно список продуктов. Каждый продукт представляет собой каталог, где
  до точки набор шестнадцатеричных символов, по 2 на категорию. Всего до 8 категорий, что бы помещалось в число.
  Думаю, это использовать потом для определения принадлежности к дополнительным категориям. Доп. категория - 1 число.
  После точки номер товара в этой категории. 2 байта, думаю, хватит.
  Тут же в куче лежат файлы для категорий, где имя - его код. Без точки. Таким образом, при отсортированном отображении 
  каталога Src будет сверху вниз - категория - её товары - вложенная категория - её товары, итд.

2. Думаю, сделать набор тегов, где каждый тег - каталог с symlink-ами на каталоги из Src.
  

  to be continued
